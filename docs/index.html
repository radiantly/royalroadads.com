<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="A collection of all the rectangle ads (300x250) on Royal Road"
    />
    <meta property="og:title" content="Royal Road Ads" />
    <meta property="og:site_name" content="Royal Road Ads" />
    <meta property="og:url" content="https://royalroadads.com/" />
    <title>Royal Road Ads</title>
    <style>
      @font-face {
        font-family: "Dot Matrix";
        src: url(data:application/font-woff2;charset=utf-8;base64,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)
          format("woff2");
        font-weight: normal;
        font-style: normal;
      }
      :root {
        --grid-padding: 10px;
        --rr-blue: #337ab7;
        --default-font: -apple-system, BlinkMacSystemFont, avenir next, avenir,
          segoe ui, helvetica neue, Adwaita Sans, Cantarell, Ubuntu, roboto,
          noto, helvetica, arial, sans-serif;
        --dot-matrix: "Dot Matrix", sans-serif;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        margin: 0;
        min-height: 100vh;
      }
      body {
        display: flex;
        justify-content: center;
        color: #111;
        background-color: #fff;
        font-family: var(--default-font);
        overflow-x: hidden;
      }

      .text {
        font-size: 14px;
        line-height: 1.4;
      }
      .text a {
        color: inherit;
        text-decoration: none;
        position: relative;
      }

      .text a:hover {
        color: var(--rr-blue);
      }

      .text a::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: var(--rr-blue);
        pointer-events: none;
        transition: all 0.2s ease;
        z-index: -1;
        transform-origin: right center;
      }

      .text a:hover::after {
        transform: scaleX(0);
      }

      .container {
        display: flex;
        flex-direction: column;
        padding: 20px;
        gap: 40px;
        width: 100%;
      }

      section {
        display: none;
      }

      nav {
        display: flex;
        padding: 20px 25px;
        position: relative;
        justify-content: center;
        z-index: 42;
        font-family: var(--dot-matrix);
        border: 1px solid #ebebeb;
        width: 90vw;
        align-self: center;
        border-radius: 10px;
        box-shadow: 0 50px 110px 0 rgba(0, 0, 0, 0.1),
          0 201px 201px 0 rgba(0, 0, 0, 0.09),
          0 452px 250px 0 rgba(0, 0, 0, 0.05),
          0 803px 250px 0 rgba(0, 0, 0, 0.01);
        align-items: center;
        font-size: 18px;
      }
      nav .logo {
        font-size: 24px;
      }

      nav .logo .accent {
        position: relative;
        color: white;
      }

      nav .logo .accent::before {
        content: "";
        position: absolute;
        top: -4px;
        left: -7px;
        width: calc(100% + 10px);
        height: calc(100% + 7px);
        border-radius: 5px;
        background-color: #2a2a2a;
        z-index: -1;
      }

      nav a {
        text-decoration: none;
        color: inherit;
        position: relative;
      }

      nav a::before {
        content: "";
        position: absolute;
        bottom: -4px;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: #2a2a2a;
        transform: scaleX(0);
        transform-origin: left center;
        transition: transform 0.2s ease;
      }

      nav a:hover::before {
        transform: scale(1);
      }

      .rra-grid {
        --x: 0;
        --y: 0;
        --width: 300px;
        --height: 250px;

        display: flex;
        flex-grow: 1;
        gap: var(--grid-padding);
        min-height: 500vh;
        position: relative;
        align-self: stretch;
        align-items: stretch;
      }

      .rra-grid div.backdrop-container {
        filter: blur(15px);
        z-index: -1;
        contain: strict;
        flex-grow: 1;
      }

      .rra-grid div.backdrop-container img {
        position: absolute;
        top: 0;
        left: 0;
        border-radius: 10px;
        opacity: 0.7;

        width: var(--width);
        height: var(--height);
        transform: translate(var(--x), var(--y));
      }

      .rra-grid div.backdrop-container img.expanded {
        display: none;
      }

      .rra-grid div.positioned {
        position: absolute;
        top: 0;
        left: 0;

        width: var(--width);
        height: var(--height);
        transform: translate(var(--x), var(--y));
        transition: transform 0.2s ease, box-shadow 2s ease 0.2s,
          border 0.2s ease 0.2s;

        border: 1px solid transparent;

        display: flex;
        gap: 20px;
        z-index: 13;
        border-radius: 10px;
        contain: strict;
      }

      .rra-grid div.positioned:not(.expanded):hover {
        transform: translate(var(--x), calc(var(--y) - 5px));
      }

      .rra-grid div.positioned > .left {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .rra-grid div.positioned > .right > *,
      .rra-grid div.positioned > .left > * {
        flex-shrink: 0;
      }

      .rra-grid div.positioned > .left .cover-wrap {
        display: flex;
        position: relative;
        overflow: hidden;
        box-shadow: rgba(0, 0, 0, 0.7) 0px 15px 20px -10px;
        border-radius: 3px 2px 2px 3px;
      }

      .rra-grid div.positioned > .left .cover-wrap::before {
        content: "";
        background: linear-gradient(
          to right,
          rgba(0, 0, 0, 0.5) 2px,
          rgba(255, 255, 255, 0.2) 3px,
          rgba(255, 255, 255, 0.1) 5px,
          transparent 6px 7px,
          rgba(255, 255, 255, 0.1) 8px,
          transparent 12px
        );
        box-shadow: inset -1px 1px 2px rgba(255, 255, 255, 0.3);
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }

      .rra-grid div.positioned > .left .cover-wrap img {
        width: 150px;
        height: 225px;
      }

      .rra-grid div.positioned > .left .read-btn {
        display: flex;
        justify-content: center;
        align-items: center;
        text-decoration: none;
        border: none;
        background-color: var(--rr-blue);
        height: 40px;
        color: white;
        font-size: 16px;
        font-weight: 600;
        transition: background-color 0.2s ease;
      }

      .rra-grid div.positioned > .left .read-btn:hover {
        background-color: #2a6ea8;
      }

      .rra-grid div.positioned > .left .rad-wrap {
        border-radius: 10px;
        display: flex;
        position: relative;
      }

      .rra-grid div.positioned:not(.external) > .left .rad-wrap {
        cursor: default;
      }

      .rra-grid div.positioned > .left .rad-wrap img {
        border-radius: 10px;
      }

      .rra-grid div.positioned > .left .rad-wrap > .open-in-new-icon-wrap {
        width: 24px;
        height: 24px;
        display: flex;
        justify-content: center;
        align-items: center;
        position: absolute;
        top: 10px;
        right: 10px;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease;
      }

      .rra-grid div.positioned > .left .rad-wrap > .open-in-new-icon-wrap {
        fill: #fefefe;
        filter: drop-shadow(0 0 5px black);
      }

      .rra-grid
        div.positioned.external
        > .left
        .rad-wrap:hover
        > .open-in-new-icon-wrap {
        opacity: 1;
      }

      .rra-grid div.positioned > .right {
        display: flex;
        flex-direction: column;
        min-width: 0;
        gap: 10px;
      }

      .rra-grid div.positioned > .right .title-row {
        display: flex;
        opacity: 0;
        animation: fade-in 0.2s ease 0.3s forwards;
      }

      .rra-grid div.positioned > .right .title {
        font-family: var(--dot-matrix);
        font-size: 22px;
      }

      .rra-grid div.positioned > .right .close {
        cursor: pointer;
        position: relative;
      }

      .rra-grid div.positioned > .right .close::before {
        content: "";
        position: absolute;
        top: -10px;
        left: -10px;
        width: calc(100% + 20px);
        height: calc(100% + 20px);
        opacity: 0.2;
      }

      .rra-grid div.positioned > .right .close svg {
        fill: #ddd;
        transition: fill 0.2s ease;
      }

      .rra-grid div.positioned > .right .close:hover svg {
        fill: #aaa;
      }

      .rra-grid div.positioned > .right .info {
        --tag-height: 20px;
        height: var(--tag-height);
        opacity: 0;
        animation: fade-in 0.2s ease 0.4s forwards;
      }

      .rra-grid div.positioned > .right .info > .info-children {
        display: flex;
        flex-direction: column;
        gap: 10px;
        clip-path: polygon(
          0 0,
          100% 0,
          100% var(--tag-height),
          0 var(--tag-height)
        );
        transition: clip-path 0.4s ease;
      }

      .rra-grid div.positioned > .right .tags {
        display: flex;
        gap: 5px;
        flex-wrap: wrap;
        font-size: 13px;
        text-transform: capitalize;
        color: #666;
      }
      .rra-grid div.positioned > .right .info:hover > .info-children {
        clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
      }

      .rra-grid div.positioned > .right .tags > div {
        flex-shrink: 0;
        border: 1px solid #ddd;
        border-radius: 2px;
        padding: 0 3px;
        height: var(--tag-height);
        display: flex;
        align-items: center;
      }

      .rra-grid div.positioned > .right .byline {
        font-style: italic;
      }

      .rra-grid div.positioned > .right .summary {
        opacity: 0;
        animation: fade-in 0.3s ease 0.5s forwards;
        display: flex;
        flex-direction: column;
        gap: 10px;
        clip-path: inset(0 0 0 0);
        transition: clip-path 0.5s ease;
      }

      .rra-grid div.positioned > .right .info:hover + .summary {
        clip-path: inset(100% 0 0 0);
      }

      .rra-grid div.positioned > .right .summary > p {
        margin: 0;
      }

      .rra-grid div.positioned > .right hr {
        border: none;
        background-color: #ddd;
        height: 2px;
      }

      .rra-grid div.positioned:not(.expanded) .left .cover-wrap,
      .rra-grid div.positioned:not(.expanded) .left .read-btn,
      .rra-grid div.positioned:not(.expanded) .right {
        display: none;
      }

      .rra-grid div.positioned:not(.expanded) .left,
      .rra-grid div.positioned:not(.expanded) .left .rad-wrap {
        flex-grow: 1;
      }

      .rra-grid div.positioned.expanded {
        box-shadow: 0 22px 48px 0 rgba(0, 0, 0, 0.1),
          0 87px 87px 0 rgba(0, 0, 0, 0.09), 0 196px 118px 0 rgba(0, 0, 0, 0.05),
          0 348px 139px 0 rgba(0, 0, 0, 0.01), 0 545px 152px 0 rgba(0, 0, 0, 0);
        border: 1px solid #ebebeb;
        padding: 20px;
      }

      .rra-grid div.positioned.expanded .rad-wrap img {
        width: 150px;
        height: 125px;
        border-radius: 0;
      }

      .rra-grid div.positioned.placeholder .rad-wrap img {
        visibility: hidden;
      }

      @media screen and (max-width: 600px) {
        html {
          scroll-snap-type: y mandatory;
        }
        body {
          flex-direction: column;
          justify-content: start;
        }
        .container {
          display: none;
        }
        section {
          display: flex;
          flex-direction: column;
          min-height: 0;
          contain: strict;
          align-items: center;
          gap: 20px;

          --ad-width: min(95vw, 300px);

          padding: 1rem;
          height: 100vh;
          scroll-snap-align: start;
          position: relative;
          padding: max(20px, 5vh) 0;
        }
        section:nth-child(odd) {
          background-color: #fefefe;
        }
        section.m-hero {
          align-items: stretch;
          text-align: center;
        }
        section.m-hero .m-hero-title {
          font-family: var(--dot-matrix);
          font-size: 36px;
        }
        section.m-hero .m-hero-title > span {
          color: white;
          position: relative;
        }
        section.m-hero .m-hero-content {
          display: flex;
          flex-direction: column;
          align-items: center;
          flex-grow: 1;
          justify-content: space-around;
        }
        section.m-hero .m-hero-center {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 30px;
          min-width: 0;
        }
        section.m-hero .m-hero-title > span::before {
          content: "";
          position: absolute;
          top: -5px;
          left: -10px;
          bottom: -4px;
          right: -6px;
          background-color: #111;
          z-index: -1;
          border-radius: 5px;
        }
        section.m-hero .m-hero-tagline {
          font-size: 15px;
          line-height: 1.4;
          color: #555;
          width: 100%;
        }
        section.m-hero .m-hero-scroll {
          font-family: var(--dot-matrix);
          text-transform: uppercase;
          font-size: 16px;
          position: relative;
          pointer-events: none;
        }

        section.m-hero .m-hero-scroll::after {
          content: "»";
          position: absolute;
          top: 200%;
          left: 50%;
          transform: translateX(-50%) rotateZ(90deg);
        }
        .m-rect-ad {
          width: var(--ad-width);
          height: 250px;
          border-radius: 10px;
        }
        .m-infobox {
          --padding: 15px;
          width: var(--ad-width);
          display: flex;
          flex-direction: column;
          align-items: stretch;
          gap: 20px;

          background-color: #eee;
          border-radius: 10px;
          overflow: hidden;
          padding-bottom: var(--padding);
          position: relative;
          flex-grow: 1;
        }
        .m-infobox::after {
          content: "";
          position: absolute;
          bottom: 0;
          left: 0;
          width: 100%;
          height: 40px;
          z-index: 13;
          background: linear-gradient(to bottom, transparent, #eee 20px);
        }
        .m-title {
          font-family: var(--dot-matrix);
          background-color: #3d3d3d;
          display: flex;
          font-size: 20px;
          padding: 10px var(--padding);
          color: #f3f3f3;
          line-height: 1.4;
        }
        .m-cover-row {
          display: flex;
          padding: 0 var(--padding);
          gap: 10px;
          min-height: 0;
          flex-shrink: 0;
          height: 150px;
        }
        img.m-cover {
          height: 150px;
          width: 100px;
        }
        .m-tags-n-stuff {
          display: flex;
          flex-direction: column;
          flex-grow: 1;
          min-height: 0;
          gap: 4px;
        }
        .m-tags-wrap {
          flex-grow: 1;
          display: flex;
          flex-direction: column;
          min-height: 0;
          overflow: hidden;
        }
        .m-tags {
          display: flex;
          flex-wrap: wrap;
          gap: 4px;
          text-transform: capitalize;
          align-items: flex-start;
          color: #444;
          font-size: 13px;
        }
        .m-tags > div {
          height: 19px;
          flex-shrink: 0;
          border: 1px solid #ddd;
          border-radius: 2px;
          padding: 0 3px;
          display: flex;
          align-items: center;
        }
        .m-button-row {
          display: flex;
          gap: 10px;
          height: 34px;
          align-items: stretch;
          flex-shrink: 0;
        }
        a.m-read-btn {
          background-color: var(--rr-blue);
          display: flex;
          color: white;
          flex-grow: 1;
          align-items: center;
          font-size: 14px;
          text-decoration: none;
        }
        .m-read-btn > span {
          text-align: center;
          flex-grow: 1;
        }
        .m-read-btn > svg {
          fill: white;
          margin: 0 10px;
        }
        .m-app-btn {
          display: flex;
          align-items: center;
          padding: 0 5px;
        }
        .m-desc {
          /* color: white; */
          padding: 0 var(--padding);
          display: flex;
          flex-direction: column;
          gap: 10px;
          min-height: 0;
          overflow: hidden;
          flex-shrink: 0;
        }
        .m-desc > p {
          margin: 0;
        }
      }

      @keyframes fade-in {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <nav>
        <div class="logo">Royal Road <span class="accent">Ads</span></div>
        <div style="flex-grow: 1"></div>
        <div class="github">
          <a
            href="https://github.com/radiantly/royalroadads.com"
            target="_blank"
            >GITHUB</a
          >
        </div>
      </nav>
      <div class="rra-grid">
        <div class="backdrop-container"></div>
      </div>
    </div>
    <section class="m-hero">
      <div class="m-hero-top"></div>
      <div class="m-hero-content">
        <div class="m-hero-center">
          <div class="m-hero-title">Royal Road <span>Ads</span></div>
          <div class="m-hero-tagline">
            A collection of all the rectangle ads<br />(300x250) on Royal Road
          </div>
        </div>
        <div class="m-hero-scroll">Scroll Down</div>
      </div>
    </section>
    <template id="ad-element">
      <div class="positioned placeholder">
        <div class="left">
          <div class="cover-wrap">
            <img src="#" />
          </div>
          <a href="#" class="read-btn" target="_blank">Read now</a>
          <a href="#" class="rad-wrap" target="_blank">
            <img src="data:," alt="Rectangle Ad" />
            <div class="open-in-new-icon-wrap">
              <svg
                width="18"
                height="18"
                viewBox="0 0 18 18"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M15 16H3C2.45 16 2 15.55 2 15V3C2 2.45 2.45 2 3 2H8C8.55 2 9 1.55 9 1C9 0.45 8.55 0 8 0H2C0.89 0 0 0.9 0 2V16C0 17.1 0.9 18 2 18H16C17.1 18 18 17.1 18 16V10C18 9.45 17.55 9 17 9C16.45 9 16 9.45 16 10V15C16 15.55 15.55 16 15 16ZM11 1C11 1.55 11.45 2 12 2H14.59L5.46 11.13C5.07 11.52 5.07 12.15 5.46 12.54C5.85 12.93 6.48 12.93 6.87 12.54L16 3.41V6C16 6.55 16.45 7 17 7C17.55 7 18 6.55 18 6V1C18 0.45 17.55 0 17 0H12C11.45 0 11 0.45 11 1Z"
                />
              </svg>
            </div>
          </a>
        </div>
        <div class="right">
          <div class="title-row">
            <div class="title"></div>
            <div style="flex-grow: 1"></div>
            <div class="close">
              <svg
                width="12"
                height="12"
                viewBox="0 0 12 12"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M10.6904 0.0498047C11.0503 0.0498316 11.3431 0.16568 11.5732 0.394531C11.8249 0.646282 11.9502 0.943156 11.9502 1.28809C11.9502 1.5899 11.8547 1.84645 11.6631 2.05957L11.5732 2.14941L7.75781 5.93164L7.72266 5.96777L7.75781 6.00293L11.5732 9.80762C11.802 10.0378 11.917 10.3306 11.917 10.6904C11.917 11.0055 11.8289 11.2691 11.6533 11.4844L11.5732 11.5732C11.3215 11.825 11.0246 11.9501 10.6797 11.9502C10.3348 11.9502 10.0488 11.8255 9.81934 11.5752L9.81836 11.5732L6.03516 7.75781L6 7.72266L5.96484 7.75781L2.16016 11.5732C1.93001 11.8021 1.63711 11.9169 1.27734 11.917C0.917444 11.917 0.623764 11.8021 0.393555 11.5732H0.394531C0.165694 11.3444 0.0498047 11.053 0.0498047 10.6953C0.0498776 10.3378 0.165766 10.0471 0.394531 9.81836L4.20898 6.00293L4.24512 5.9668L4.20898 5.93164L0.393555 2.16016H0.394531C0.165706 1.92998 0.0498595 1.63713 0.0498047 1.27734C0.0498047 0.917476 0.165723 0.624724 0.394531 0.394531C0.623314 0.165748 0.913942 0.0498594 1.27148 0.0498047C1.62914 0.0498047 1.92058 0.165694 2.14941 0.394531L5.96484 4.20898L6 4.24512L6.03516 4.20898L9.80762 0.394531C10.0378 0.165678 10.3306 0.0498047 10.6904 0.0498047Z"
                />
              </svg>
            </div>
          </div>
          <div class="info">
            <div class="info-children">
              <div class="tags"></div>
              <div class="byline text">
                <span class="status"></span>&nbsp;<span class="type"></span
                >&nbsp;by&nbsp;<a href="#" class="author" target="_blank"></a>.
              </div>
              <div class="retrieved-on text"></div>
            </div>
          </div>
          <div class="summary text"></div>
        </div>
      </div>
      <img class="backdrop" src="#" aria-hidden="true" />
    </template>
    <template id="m-ad-element">
      <section>
        <img
          class="m-rect-ad"
          src="300x250/19d467f0-ec4f-4ad1-99a8-2b1568ec452b.webp"
        />
        <div class="m-infobox">
          <div class="m-title">Royal Road Ad</div>
          <div class="m-cover-row">
            <img src="200x300/95818.webp" alt="Cover image" class="m-cover" />
            <div class="m-tags-n-stuff">
              <div class="m-tags-wrap">
                <div class="m-tags"></div>
              </div>
              <div class="m-button-row">
                <a href="#" target="_blank" class="m-read-btn">
                  <span>Read now</span>
                  <svg
                    width="14"
                    height="14"
                    viewBox="0 0 18 18"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M15 16H3C2.45 16 2 15.55 2 15V3C2 2.45 2.45 2 3 2H8C8.55 2 9 1.55 9 1C9 0.45 8.55 0 8 0H2C0.89 0 0 0.9 0 2V16C0 17.1 0.9 18 2 18H16C17.1 18 18 17.1 18 16V10C18 9.45 17.55 9 17 9C16.45 9 16 9.45 16 10V15C16 15.55 15.55 16 15 16ZM11 1C11 1.55 11.45 2 12 2H14.59L5.46 11.13C5.07 11.52 5.07 12.15 5.46 12.54C5.85 12.93 6.48 12.93 6.87 12.54L16 3.41V6C16 6.55 16.45 7 17 7C17.55 7 18 6.55 18 6V1C18 0.45 17.55 0 17 0H12C11.45 0 11 0.45 11 1Z"
                    />
                  </svg>
                </a>
                <a href="#" target="_blank" class="m-app-btn">
                  <svg
                    class="m-google-play-icon"
                    width="14"
                    height="15"
                    viewBox="0 0 14 15"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M6.53819 7.15088L0.0581055 13.731C0.130876 13.981 0.261648 14.2115 0.440423 14.4049C0.619198 14.5984 0.841244 14.7497 1.08959 14.8472C1.33793 14.9447 1.606 14.9859 1.87329 14.9677C2.14059 14.9494 2.40004 14.8722 2.63181 14.7418L9.92313 10.7171L6.53819 7.15088Z"
                      fill="#EA4335"
                    />
                    <path
                      d="M13.0908 6.03262L9.93778 4.28223L6.38867 7.30078L9.95222 10.7078L13.0812 8.97622C13.3584 8.83554 13.5906 8.62402 13.7526 8.36457C13.9146 8.10512 14.0002 7.80765 14.0002 7.50439C14.0002 7.20113 13.9146 6.90366 13.7526 6.64421C13.5906 6.38476 13.3584 6.17324 13.0812 6.03256L13.0908 6.03262Z"
                      fill="#FBBC04"
                    />
                    <path
                      d="M0.0579857 1.24512C0.01884 1.38547 -0.000657598 1.53028 1.69184e-05 1.67566V13.3008C0.000403454 13.4461 0.019883 13.5908 0.0579857 13.7314L6.76021 7.31975L0.0579857 1.24512Z"
                      fill="#4285F4"
                    />
                    <path
                      d="M6.58648 7.48802L9.93762 4.28221L2.65598 0.238678C2.38201 0.0831767 2.07042 0.000822915 1.75293 3.25072e-06C0.965043 -0.00148085 0.272371 0.505339 0.0581055 1.24023L6.58648 7.48802Z"
                      fill="#34A853"
                    />
                  </svg>
                </a>
              </div>
            </div>
          </div>
          <div class="m-desc text">We don't have details for this one</div>
        </div>
      </section>
    </template>
    <script>
      class FictionBuddy {
        static TAGS = Object.freeze({
          fanfic: "Fan Fiction",
          gamelit: "GameLit",
          litrpg: "LitRPG",
          multiple_lead: "Multiple Lead Characters",
          summoned_hero: "Portal Fantasy / Isekai",
        });

        #state;
        constructor(callback) {
          this.#state = {
            callback,

            fictions: new Map(),
          };

          setTimeout(
            () =>
              fetch("fiction.json")
                .then((response) => response.json())
                .then((obj) => this.#handleFictionResponse(obj)),
            0
          );
        }

        #fixupFictionEntry(id, fiction) {
          fiction.id = id;
          fiction.tags = fiction.tags.map(
            (tag) => FictionBuddy.TAGS[tag] ?? tag.replace(/_/g, " ")
          );
          return fiction;
        }

        #handleFictionResponse({ entries }) {
          for (const [fictionId, entry] of Object.entries(entries)) {
            const fixedEntry = this.#fixupFictionEntry(fictionId, entry);
            this.#state.fictions.set(fictionId, fixedEntry);
          }
          this.#state.callback();
        }

        getFictionDetails(fictionId) {
          return this.#state.fictions.get(fictionId) ?? null;
        }
      }

      class RectangleAd {
        static WIDTH = 300;
        static HEIGHT = 250;
        static MIN_WIDTH_EXPANDED = 600;

        #state;
        #required;
        constructor(layoutType, requestLayoutCallback) {
          this.#state = {
            requestLayoutCallback,

            // elements
            desktopElems: null,
            mobileElems: null,

            layoutType,

            expandedHeightCache: new Map(),

            current: {
              mobile: {
                ad_content: null,
                fiction: null,
              },
              desktop: {
                // layout
                x: null,
                y: null,
                width: null,
                height: null,
                expanded: false,

                ad_content: null,
                fiction: null,
              },
            },
          };

          this.#required = Object.assign({}, this.#state.current.desktop);
        }

        get #current() {
          return this.#state.current[this.#state.layoutType];
        }

        setLayoutType(type) {
          this.#state.layoutType = type;
        }

        setAdContent({ uid, alt, link, timestamp }) {
          this.#required.ad_content = { uid, alt, link, timestamp };
        }

        setFictionDetails(fiction) {
          this.#required.fiction = fiction;
        }

        get expanded() {
          return this.#required.expanded ?? this.#current.expanded;
        }

        get needsLayoutUpdate() {
          // no manual layout required for mobile
          if (this.#state.layoutType === "mobile") return false;

          // desktop
          return (
            this.#current.x !== this.#required.x ||
            this.#current.y !== this.#required.y ||
            this.#current.width !== this.#required.width ||
            this.#current.height !== this.#required.height ||
            this.#current.expanded !== this.#required.expanded
          );
        }

        get needsContentUpdate() {
          return (
            this.#current.ad_content !== this.#required.ad_content ||
            this.#current.fiction !== this.#required.fiction
          );
        }

        get expandable() {
          return this.#required.fiction !== null;
        }

        get adImgSrc() {
          return `300x250/${this.#required.ad_content.uid}.webp`;
        }

        get coverImgSrc() {
          return `200x300/${this.#required.fiction.id}.webp`;
        }

        get authorHref() {
          return `https://www.royalroad.com/profile/${
            this.#required.fiction.author_id
          }`;
        }

        get androidLink() {
          return `https://www.royalroad.com/redirects/android/fiction/${
            this.#required.fiction.id
          }`;
        }

        get fictionId() {
          const match = this.#required.ad_content?.link?.match(
            /royalroad\.com\/fiction\/(\d+)/
          );
          return match ? match[1] : null;
        }

        get needsFictionDetails() {
          return this.#required.fiction === null && this.fictionId !== null;
        }

        get fictionStatus() {
          const status = this.#required.fiction.status.toLowerCase();
          if (status === "ongoing") return "An ongoing";
          if (status === "hiatus") return "A paused";
          if (status === "inactive") return "An inactive";
          if (status === "dropped") return "An abandoned";
          if (status === "stub") return "A stubbed";
          if (status === "completed") return "A completed";
          return "A";
        }

        get fictionType() {
          return this.#required.fiction.tags.includes(FictionBuddy.TAGS.fanfic)
            ? "fan fiction"
            : "web novel";
        }

        get retrievedOn() {
          const format = {
            year: "numeric",
            month: "short",
            day: "numeric",
          };
          const { timestamp: fic_timestamp } = this.#required.fiction;
          const { timestamp: ad_timestamp } = this.#required.ad_content;
          const lastUpdated = new Date(fic_timestamp * 1000).toLocaleDateString(
            undefined,
            format
          );
          const adFetchDate = new Date(ad_timestamp * 1000).toLocaleDateString(
            undefined,
            format
          );
          return `Last updated on ${lastUpdated}. Ad retrieved on ${adFetchDate}.`;
        }

        get hasElements() {
          return this.#getElements() !== null;
        }

        #getElements(createIfNotExists = false) {
          if (this.#state.layoutType === "desktop") {
            if (createIfNotExists && this.#state.desktopElems === null) {
              this.#state.desktopElems = this.#createHTMLElementsForDesktop();

              const { positioned, backdrop } = this.#state.desktopElems;

              document.querySelector(".rra-grid").appendChild(positioned);
              document
                .querySelector(".rra-grid > .backdrop-container")
                .appendChild(backdrop);
            }
            return this.#state.desktopElems;
          }

          if (this.#state.layoutType === "mobile") {
            if (createIfNotExists && this.#state.mobileElems === null) {
              this.#state.mobileElems = this.#createHTMLElementsForMobile();
              const { section } = this.#state.mobileElems;
              document.body.appendChild(section);
            }
            return this.#state.mobileElems;
          }
        }

        #addElementHandlers(positioned, backdrop) {
          positioned.addEventListener("click", (event) => {
            if (this.expandable === false) return;
            if (event.target.closest(".close")) this.#required.expanded = false;

            if (event.target.closest(".rad-wrap")) {
              event.preventDefault();
              this.#required.expanded = true;
            }

            if (this.#current.expanded !== this.#required.expanded)
              this.#state.requestLayoutCallback(this);
          });
        }

        #markContentUpdateSuccessful() {
          this.#current.ad_content = this.#required.ad_content;
          this.#current.fiction = this.#required.fiction;
        }

        #createHTMLElementsForDesktop() {
          const template = document.getElementById("ad-element");
          const fragment = template.content.cloneNode(true);
          const positioned = fragment.querySelector("div.positioned");

          const backdrop = fragment.querySelector("img.backdrop");

          this.#addElementHandlers(positioned, backdrop);

          return { positioned, backdrop };
        }

        #createHTMLElementsForMobile() {
          const template = document.getElementById("m-ad-element");
          const fragment = template.content.cloneNode(true);
          const section = fragment.querySelector("section");

          return { section };
        }

        #computeHeight(width) {
          const { positioned } = this.#getElements(true);

          // set required properties
          positioned.style.opacity = "0";
          positioned.style.contain = "none";
          positioned.classList.add("expanded");
          positioned.style.setProperty("--width", `${width}px`);
          positioned.style.setProperty("--height", `auto`);

          this.updateContent();

          // calculate height
          const { height } = positioned.getBoundingClientRect();

          // reset properties
          positioned.style.setProperty("--width", `${this.#current.width}px`);
          positioned.style.setProperty("--height", `${this.#current.height}px`);
          positioned.classList.toggle("expanded", this.#current.expanded);
          positioned.style.contain = null;
          positioned.style.opacity = null;

          return Math.ceil(height);
        }

        computeHeight({ width }) {
          if (!this.#required.expanded) return RectangleAd.HEIGHT;

          if (!this.#state.expandedHeightCache.has(width))
            this.#state.expandedHeightCache.set(
              width,
              this.#computeHeight(width)
            );
          return this.#state.expandedHeightCache.get(width);
        }

        setLayoutProps({ x, y, width, height, expanded }) {
          this.#required.x = x ?? this.#required.x;
          this.#required.y = y ?? this.#required.y;
          this.#required.width = width ?? this.#required.width;
          this.#required.height = height ?? this.#required.height;
          this.#required.expanded = expanded ?? this.#required.expanded;
        }

        #updatePositionForDesktop() {
          if (!this.needsLayoutUpdate) return;

          const { x, y, width, height, expanded } = this.#required;
          const { positioned, backdrop } = this.#getElements();

          if (this.#current.x !== x || this.#current.y !== y) {
            positioned.style.setProperty("--x", `${x}px`);
            positioned.style.setProperty("--y", `${y}px`);

            backdrop.style.setProperty("--x", `${x}px`);
            backdrop.style.setProperty("--y", `${y}px`);

            this.#current.x = x;
            this.#current.y = y;
          }

          if (
            this.#current.width !== width ||
            this.#current.height !== height
          ) {
            positioned.style.setProperty("--width", `${width}px`);
            positioned.style.setProperty("--height", `${height}px`);

            this.#current.width = this.#required.width;
            this.#current.height = this.#required.height;
          }

          if (this.#current.expanded !== expanded) {
            positioned.classList.toggle("expanded", expanded);
            backdrop.classList.toggle("expanded", expanded);
            this.#current.expanded = this.#required.expanded;
          }
        }

        initHTML() {
          this.#getElements(true);
        }

        updatePosition() {
          if (this.#state.layoutType === "desktop")
            this.#updatePositionForDesktop();
        }

        #updateContentForDesktop({ positioned, backdrop }) {
          if (!this.needsContentUpdate) return;

          if (this.#required.ad_content === null) return;
          const { alt, link } = this.#required.ad_content;

          positioned.classList.remove("placeholder");
          positioned.classList.toggle("external", !this.expandable);

          positioned.querySelector("a.read-btn").href = link;
          positioned.querySelector("a.rad-wrap").href = link;

          const img = positioned.querySelector("a.rad-wrap img");
          img.src = this.adImgSrc;
          img.alt = alt;
          img.title = alt;

          backdrop.src = this.adImgSrc;

          if (this.#required.fiction !== null) {
            const { title, description, tags, author_name } =
              this.#required.fiction;
            const titleElem = positioned.querySelector(".title");
            titleElem.textContent = title;

            const tagsElem = positioned.querySelector(".tags");
            const tagsElems = tags.map((tag) => {
              const div = document.createElement("div");
              div.textContent = tag;
              return div;
            });
            tagsElem.replaceChildren(...tagsElems);

            const statusElem = positioned.querySelector("span.status");
            statusElem.textContent = this.fictionStatus;

            const typeElem = positioned.querySelector("span.type");
            typeElem.textContent = this.fictionType;

            const authorElem = positioned.querySelector("a.author");
            authorElem.textContent = author_name;
            authorElem.href = this.authorHref;

            const retrievedElem = positioned.querySelector("div.retrieved-on");
            retrievedElem.textContent = this.retrievedOn;

            const summaryElem = positioned.querySelector(".summary");
            summaryElem.innerHTML = description;

            const coverImageElem = positioned.querySelector(".cover-wrap img");
            coverImageElem.src = this.coverImgSrc;
          }

          this.#markContentUpdateSuccessful();
        }

        #updateContentForMobile({ section }) {
          if (!this.needsContentUpdate) return;

          if (this.#required.ad_content === null) return;
          const { alt, link } = this.#required.ad_content;

          section.querySelector("a.m-read-btn").href = link;

          const img = section.querySelector("img.m-rect-ad");
          img.src = this.adImgSrc;
          img.alt = alt;
          img.title = alt;

          if (this.#required.fiction !== null) {
            const { title, description, tags, author_name } =
              this.#required.fiction;
            const titleElem = section.querySelector(".m-title");
            titleElem.textContent = title;

            const tagsElem = section.querySelector(".m-tags");
            const tagsElems = tags.map((tag) => {
              const div = document.createElement("div");
              div.textContent = tag;
              return div;
            });
            tagsElem.replaceChildren(...tagsElems);

            const appBtnElem = section.querySelector("a.m-app-btn");
            appBtnElem.href = this.androidLink;

            const summaryElem = section.querySelector(".m-desc");
            summaryElem.innerHTML = description;

            const coverImageElem = section.querySelector("img.m-cover");
            coverImageElem.src = this.coverImgSrc;
          }

          this.#markContentUpdateSuccessful();
        }

        updateContent() {
          const elements = this.#getElements();
          if (elements === null) return;

          if (this.#state.layoutType === "desktop")
            this.#updateContentForDesktop(elements);
          else if (this.#state.layoutType === "mobile")
            this.#updateContentForMobile(elements);
        }
      }

      class RenderMonkey {
        #state;
        constructor() {
          this.#state = {
            ads: [],
            layoutComputedTill: { y: 0, index: 0 },
            m_index: 0,

            varianceCache: new Map(),
            fictionBuddy: new FictionBuddy(() => this.updateFictionDetails()),

            placeholderEntriesCount: 0,

            layoutPending: false,
            activeAd: null,

            vWidth: null,
            vHeight: null,
            scrollY: null,
            type: this.#getLayoutType(),
          };

          this.requestRender = this.requestRender.bind(this);
        }

        #getLayoutType() {
          return window.innerWidth <= 600 ? "mobile" : "desktop";
        }

        addPlaceholderEntries(count) {
          this.#state.placeholderEntriesCount += count;
          for (let i = 0; i < count; i += 1) {
            const ad = new RectangleAd(this.#state.type, this.requestRender);
            this.#state.ads.push(ad);
          }
        }

        addAdEntries(entries) {
          for (const [uid, entry] of Object.entries(entries)) {
            let ad;
            if (this.#state.placeholderEntriesCount) {
              const index =
                this.#state.ads.length - this.#state.placeholderEntriesCount;
              this.#state.placeholderEntriesCount -= 1;
              ad = this.#state.ads[index];
            } else {
              ad = new RectangleAd(this.#state.type, this.requestRender);
              this.#state.ads.push(ad);
            }
            ad.setAdContent({ uid, ...entry });
            const fiction = this.#state.fictionBuddy.getFictionDetails(
              ad.fictionId
            );
            if (fiction) ad.setFictionDetails(fiction);
          }
        }

        updateFictionDetails() {
          for (const ad of this.#state.ads) {
            if (!ad.needsFictionDetails) continue;
            const fiction = this.#state.fictionBuddy.getFictionDetails(
              ad.fictionId
            );
            if (fiction) ad.setFictionDetails(fiction);
          }
          this.requestRender();
        }

        #getVariances(count, variance) {
          if (!this.#state.varianceCache.has(variance))
            this.#state.varianceCache.set(variance, []);

          const variances = this.#state.varianceCache.get(variance);
          const missing = count - variances.length;
          for (let i = 0; i < missing; i += 1) {
            const vx = Math.floor(Math.random() * variance);
            const vy = Math.floor(Math.random() * variance);
            variances.push({ vx, vy });
          }
          return variances;
        }

        #calcMaxAdsForWidth(adWidth, gap, totWidth) {
          // Let x be the number of ads that can be fit in totWidth
          // adWidth * x + gap * (x - 1) = totWidth
          // adWidth * x + gap * x - gap = totWidth
          // x * (adWidth + gap) = totWidth + gap
          // x = (totWidth + gap) / (adWidth + gap)
          return Math.floor((totWidth + gap) / (adWidth + gap));
        }

        computeLayout() {
          const { vWidth, vHeight, scrollY, activeAd } = this.#state;

          if (this.#state.type === "mobile") {
            const { scrollHeight } = document.body;
            const loadCount = Math.max(
              0,
              5 - (scrollHeight - scrollY) / vHeight
            );
            this.#state.m_index = Math.min(
              this.#state.m_index + loadCount,
              this.#state.ads.length
            );
            console.log(
              scrollHeight,
              scrollY,
              vHeight,
              loadCount,
              this.#state.m_index
            );
            return;
          }

          const gap = 10;
          const variance = 40; // TODO: make this dynamic based on vWidth or perRow
          const adWidth = RectangleAd.WIDTH + variance;
          const adHeight = RectangleAd.HEIGHT + variance;

          // Ads

          const n = this.#state.ads.length;
          const variances = this.#getVariances(n, variance);

          // iterator
          const it = {
            y: 0,
            index: 0,
            adsInRow: 0,
          };

          console.log(n, variances);
          let side = null;
          let lastSideOnRight = true;
          while (it.index < n) {
            let continueFlag = false;

            // if there was a side but is now over
            if (side && side.tillY < it.y) side = null;

            // don't compute layout for things that are very far from the viewport
            // TODO: this is a costly operation when the user has scrolled down
            //       and more elements are present
            if (
              side === null &&
              !this.#state.ads[it.index].hasElements &&
              it.y > scrollY + vHeight * 5
            )
              break;

            // if the ad is expanded, we want
            if (this.#state.ads[it.index].expanded) {
              const ad = this.#state.ads[it.index];
              if (side === null) {
                // calculate the available width
                const avWidth =
                  vWidth - (RectangleAd.MIN_WIDTH_EXPANDED + variance + gap);

                const adsInRow = this.#calcMaxAdsForWidth(
                  adWidth,
                  gap,
                  avWidth
                );
                const extraSpace =
                  avWidth - (adWidth * adsInRow + gap * (adsInRow - 1));

                // ead = expanded ad
                const eadWidth = RectangleAd.MIN_WIDTH_EXPANDED + extraSpace;
                const eadHeight = ad.computeHeight({ width: eadWidth });

                const { vx, vy } = variances[it.index];
                side = {
                  onRight: !lastSideOnRight,
                  width: eadWidth + variance + gap,
                  height: eadHeight + variance + gap,
                  tillY: eadHeight + vy + gap + it.y,
                  it: Object.assign({}, it),
                };
                lastSideOnRight = side.onRight;
                const x = side.onRight ? vWidth - side.width + gap + vx : vx;
                const y = vy + it.y;
                ad.setLayoutProps({
                  x,
                  y,
                  width: eadWidth,
                  height: eadHeight,
                  expanded: true,
                });
                it.adsInRow = 0;
                it.index += 1;
              }
            }

            const avWidth = vWidth - (side?.width ?? 0); // available width
            const maxAdsInRow = this.#calcMaxAdsForWidth(adWidth, gap, avWidth);
            const adsInThisRow = maxAdsInRow - (maxAdsInRow === it.adsInRow);
            const startX =
              Math.floor(
                (avWidth -
                  (adWidth * adsInThisRow + gap * (adsInThisRow - 1))) /
                  2
              ) + (side?.onRight === false ? side.width : 0);
            for (let j = 0; j < adsInThisRow && it.index < n; j += 1) {
              const ad = this.#state.ads[it.index];
              if (ad.expanded) {
                if (side === null) {
                  const startIndex = it.index - j;
                  [this.#state.ads[startIndex], this.#state.ads[it.index]] = [
                    ad,
                    this.#state.ads[startIndex],
                  ];
                  it.index = startIndex;
                  continueFlag = true;
                  break;
                } else {
                  const sideAd = this.#state.ads[side.it.index];
                  // confirm that the ad that's already on the side is not the active ad.
                  // active ad == ad that triggered this layout (eg, by click)
                  if (sideAd !== activeAd) {
                    sideAd.setLayoutProps({
                      expanded: false,
                    });
                    Object.assign(it, side.it);
                    lastSideOnRight = !lastSideOnRight;
                    side = null;
                    continueFlag = true;
                    break;
                  }
                }
              }
              const { vx, vy } = variances[it.index];
              ad.setLayoutProps({
                x: vx + startX + j * (adWidth + gap),
                y: vy + it.y,
                width: 300,
                height: 250,
                expanded: false,
              });
              it.index += 1;
            }

            if (continueFlag) continue;

            it.adsInRow = adsInThisRow;
            it.y += adHeight + gap;

            // expand random stories
            if (
              side === null &&
              it.index < n &&
              this.#state.ads[it.index].expandable &&
              it.y > scrollY + vHeight
            )
              this.#state.ads[it.index].setLayoutProps({
                expanded: true,
              });
          }

          this.#state.layoutComputedTill = it;
        }

        updatePositions() {
          const index =
            this.#state.type === "mobile"
              ? this.#state.m_index
              : this.#state.layoutComputedTill.index;
          const till = Math.min(index, this.#state.ads.length);
          for (let i = 0; i < till; i += 1) {
            const ad = this.#state.ads[i];
            ad.initHTML();
            ad.updatePosition();
            ad.updateContent();
          }
        }

        setLayoutType() {
          if (this.#getLayoutType() === this.#state.type) return;
          this.#state.type = this.#getLayoutType();

          console.log("setting layout type to", this.#state.type);

          for (const ad of this.#state.ads) ad.setLayoutType(this.#state.type);
        }

        render() {
          this.#state.vWidth = document.querySelector(".rra-grid").clientWidth;
          this.#state.vHeight = window.innerHeight;
          this.#state.scrollY = window.scrollY;
          console.info("COMPUTING LAYOUT");

          this.setLayoutType();
          this.computeLayout();
          console.log(this.#state.type, this.#state.ads.length);
          this.updatePositions();

          console.log(this.#state.layoutComputedTill);
          document.querySelector(".backdrop-container").style.height = `${
            this.#state.layoutComputedTill.y
          }px`;

          this.#state.layoutPending = false;
          this.#state.activeAd = null;
        }

        requestRender(requestingAd = null) {
          if (requestingAd) this.#state.activeAd = requestingAd;
          if (this.#state.layoutPending) return;
          this.#state.layoutPending = true;
          requestAnimationFrame(() => this.render());
        }

        requestRenderOnScroll() {
          if (
            this.#state.type === "desktop" &&
            this.#state.layoutComputedTill.y >
              window.scrollY + this.#state.vHeight * 3
          )
            return;
          if (this.#state.layoutComputedTill.index === this.#state.ads.length)
            return;
          this.requestRender();
        }
      }

      const renderMonkey = new RenderMonkey();
      renderMonkey.addPlaceholderEntries(13);
      renderMonkey.requestRender();

      const handleData = ({ entries }) => {
        renderMonkey.addAdEntries(entries);
        renderMonkey.requestRender();

        window.addEventListener("resize", () => renderMonkey.requestRender(), {
          passive: true,
        });
        window.addEventListener(
          "scroll",
          () => renderMonkey.requestRenderOnScroll(),
          { passive: true }
        );
      };

      fetch("300x250/entries.json")
        .then((response) => response.json())
        .then(handleData);
    </script>
  </body>
</html>
